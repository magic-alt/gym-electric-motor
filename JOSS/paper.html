<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Summary &mdash; gym-electric-motor 2021 documentation</title><link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> gym-electric-motor
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Gym Electric Motor Readme:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../parts/readme.html">Readme File</a></li>
</ul>
<p class="caption"><span class="caption-text">gym-electric-motor Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../parts/environments/environment.html">Environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parts/reference_generators/reference_generator.html">Reference Generators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parts/reward_functions/reward_function.html">Reward Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parts/physical_systems/physical_system.html">Physical Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parts/visualizations/visualization.html">Visualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parts/constraint_monitor.html">Constraint Monitor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parts/core.html">Core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parts/utils.html">Utils</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parts/callbacks.html">Callbacks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parts/random_component.html">Random Component</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">gym-electric-motor</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Summary</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/JOSS/paper.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <hr class="docutils" />
<p>title: ‘gym-electric-motor (GEM): A Python toolbox for the simulation of electric drive systems’
tags:</p>
<ul class="simple">
<li><p>Python</p></li>
<li><p>electric drive control</p></li>
<li><p>electric motors</p></li>
<li><p>OpenAI Gym</p></li>
<li><p>power electronics</p></li>
<li><p>reinforcement learning
authors:</p></li>
<li><p>name: Praneeth Balakrishna
affiliation: 1</p></li>
<li><p>name: Gerrit Book
affiliation: 1</p></li>
<li><p>name: Wilhelm Kirchgässner
orcid: 0000-0001-9490-1843
affiliation: 1</p></li>
<li><p>name: Maximilian Schenke
orcid: 0000-0001-5427-9527
affiliation: 1</p></li>
<li><p>name: Arne Traue
affiliation: 1</p></li>
<li><p>name: Oliver Wallscheid
orcid: 0000-0001-9362-8777
affiliation: 1</p></li>
</ul>
<p>affiliations:</p>
<ul class="simple">
<li><p>name: Department of Power Electronics and Electrical Drives, Paderborn University, Germany
index: 1
date: 28. May 2020
bibliography: Literature.bib</p></li>
</ul>
<hr class="docutils" />
<div class="section" id="summary">
<h1>Summary<a class="headerlink" href="#summary" title="Permalink to this headline"></a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">gym-electric-motor</span></code> (<code class="docutils literal notranslate"><span class="pre">GEM</span></code>) library provides simulation environments for electrical drive systems and, therefore, allows to easily design and analyze drive control solutions in Python.
Since <code class="docutils literal notranslate"><span class="pre">GEM</span></code> is strongly inspired by OpenAI’s <code class="docutils literal notranslate"><span class="pre">gym</span></code> [&#64;gym-whitepaper], it is particularly well-equipped for (but not limited to) applications in the field of reinforcement-learning-based control algorithms.
In addition, the interface allows to plug in any expert-driven control approach, such as model predictive control, to be tested  and to perform benchmark comparisons.
The <code class="docutils literal notranslate"><span class="pre">GEM</span></code> package includes a wide variety of motors, power electronic converters and mechanical load models that can be flexibly selected and parameterized via the API.
A modular structure allows additional system components to be included in the simulation framework.</p>
</div>
<div class="section" id="statement-of-need">
<h1>Statement of Need<a class="headerlink" href="#statement-of-need" title="Permalink to this headline"></a></h1>
<p>Electric drive systems and their control are an important topic in both academic and industrial research due to their worldwide usage and deployment.
Control algorithms for these systems have usually been designed, parameterized and tested within <code class="docutils literal notranslate"><span class="pre">MATLAB</span> <span class="pre">-</span> <span class="pre">Simulink</span></code> [&#64;MathWorks], which is developed and promoted specifically for
such engineering tasks.
In the more recent past, however, commercial software like <code class="docutils literal notranslate"><span class="pre">MATLAB</span></code> has difficulties to stay on par with state-of-the-art concepts for scientific modeling and the flexibility offered by open-source libraries that are available for more accessible programming languages like Python.
Consequently, a Python-based drive simulation framework like <code class="docutils literal notranslate"><span class="pre">GEM</span></code> is an evident step in order to accelerate corresponding control research and development.
Specifically, the latest efforts concerning industrial application of reinforcement-learning control algorithms heavily depend on Python packages like <code class="docutils literal notranslate"><span class="pre">Keras</span></code> [&#64;Chollet2015], <code class="docutils literal notranslate"><span class="pre">Tensorflow</span></code> [&#64;tensorflow2015-whitepaper] or <code class="docutils literal notranslate"><span class="pre">PyTorch</span></code>[&#64;NEURIPS2019_9015].
Hence, the built-in OpenAI <code class="docutils literal notranslate"><span class="pre">gym</span></code> interface allows to easily couple <code class="docutils literal notranslate"><span class="pre">GEM</span></code> to other open-source reinforcement learning toolboxes such as <code class="docutils literal notranslate"><span class="pre">Stable</span> <span class="pre">Baselines3</span></code> [&#64;stable-baselines3], <code class="docutils literal notranslate"><span class="pre">TF-Agents</span></code> [&#64;TFAgents] or <code class="docutils literal notranslate"><span class="pre">keras-rl</span></code> [&#64;plappert2016kerasrl].</p>
<p>Providing easy access to the non-commercial, open-source <code class="docutils literal notranslate"><span class="pre">GEM</span></code> library allows users from any engineering domain to include accurate drive models into their simulations, also beyond the topic of control applications.
Considering the prevalence of commercial software like <code class="docutils literal notranslate"><span class="pre">MATLAB</span></code> for educational purposes, a free-of-charge simulation alternative that does not force students or institutions to pay for licenses, has great potential to support and encourage training of new talents in the field of electrical drives and neighbouring domains (e.g. power electronics or energy systems).
<code class="docutils literal notranslate"><span class="pre">GEM</span></code> has already been used in graduate courses on reinforcement learning [&#64;rl-lecture].</p>
</div>
<div class="section" id="related-software">
<h1>Related software<a class="headerlink" href="#related-software" title="Permalink to this headline"></a></h1>
<p>Due to the strong dependence of downstream industrial development on simulated environments there is a comprehensive variety of commercial software that enables numerical analysis of every facet of electric drives.
To name just a few, <code class="docutils literal notranslate"><span class="pre">MATLAB</span> <span class="pre">-</span> <span class="pre">Simulink</span></code> is probably the most popular software environment for numerical analysis in engineering.
Herein, <code class="docutils literal notranslate"><span class="pre">MATLAB</span></code> is providing for a scientific calculation framework and <code class="docutils literal notranslate"><span class="pre">Simulink</span></code> for a model-driven graphical interface with a very large field of applications.
Examples that are designed for real-time capability (e.g., for hardware-in-the-loop prototyping) can be found in <code class="docutils literal notranslate"><span class="pre">VEOS</span></code> [&#64;dSPACE] or <code class="docutils literal notranslate"><span class="pre">HYPERSIM</span></code> [&#64;OPAL-RT].
Non-commercial simulation libraries exist, but they rarely come with predefined system models.
An exemplary package from this category is <code class="docutils literal notranslate"><span class="pre">SimuPy</span></code> [&#64;Margolis], which provides lots of flexibility for the synthesis of generic simulation models, but also requires the user to possess the necessary expert knowledge in order to implement a desired system model.
Likewise, general purpose component-oriented simulation frameworks like <code class="docutils literal notranslate"><span class="pre">OpenModelica</span></code> [&#64;OSMC2020] or <code class="docutils literal notranslate"><span class="pre">XCos</span></code> [&#64;Scilab2020] can be used for setting up electrical drive models, too, but this requires expert domain knowledge and out-of-the-box Python interfaces (e.g., for reinforcement learning) are not available.</p>
<p>In the domain of motor construction it is furthermore interesting to observe the behavior of magnetic and electric fields within a motor (simulation of partial differential equations).
Corresponding commercial simulation environments, like <code class="docutils literal notranslate"><span class="pre">ANSYS</span> <span class="pre">Maxwell</span></code> [&#64;ANSYS], <code class="docutils literal notranslate"><span class="pre">Motor-CAD</span></code> [&#64;MotorDesignLtd] or <code class="docutils literal notranslate"><span class="pre">MotorWizard</span></code> [&#64;ElectroMagneticWorks] and the exemplary non-commercial alternative <code class="docutils literal notranslate"><span class="pre">FEMM</span></code> [&#64;Meeker] are very resource and time consuming because they depend on the finite element method, which is a spatial discretization and numerical integration procedure.
Hence, these software packages are usually not considered in control development, and complement <code class="docutils literal notranslate"><span class="pre">GEM</span></code> at most.
This particularly applies in the early control design phase when researching new, innovative control approaches (rapid control prototyping) or when students want to receive quasi-instantaneous simulation feedbacks.</p>
</div>
<div class="section" id="package-architecture">
<h1>Package Architecture<a class="headerlink" href="#package-architecture" title="Permalink to this headline"></a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">GEM</span></code> library models an electric drive system by its four main components: voltage supply, power converter, electric motor and mechanical load.
The general structure of such a system is depicted in autoref{fig:SCML_system}.</p>
<a class="reference external image-reference" href="../plots/SCML_Setting.eps"><img alt="Simplified structure diagram of an electric drive system\label{fig:SCML_system}" src="../_images/SCML_Setting.eps" /></a>
<p>The <strong>voltage supply</strong> provides the necessary power that is used by the motor.
It is modeled by a fixed supply voltage $u<em>mathrm{sup}$, which allows to monitor the supply current into the converter.
A **power electronic converter*</em> is needed to supply the motor with electric power of proper frequency and magnitude, which commonly includes the conversion of the supply’s direct current to alternating current.
Typical drive converters exhibit switching behavior: there is a finite set of different voltages that can be applied to the motor, depending on which switches are open and which are closed.
Besides this physically accurate view, a popular modeling approach for switched mode converters is based on dynamic averaging of the applied voltage $u*mathrm{in}$, rendering the voltage a continuous variable.
Both of these modeling approaches are implemented and can be chosen freely, allowing usage of control algorithms that operate on a finite set of switching states or on continuous input voltages.
The <strong>electric motor</strong> is the centerpiece of every drive system.
It is described by a system of ordinary differential equations (ODEs), which represents the motor’s electrical behavior.
In particular, the domain of three-phase drives makes use of coordinate transformations to view these ODEs in the more interpretable frame of field-oriented coordinates.
In <code class="docutils literal notranslate"><span class="pre">GEM</span></code>, both, the physically accurate three-phase system ($abc$-coordinates) and the simplified, two-dimensional, field-oriented system ($dq$-coordinates) are available to be used as the frame of input and output variables, allowing for easy and quick controller analysis and diagnose within the most convenient coordinate system.
Finally, the torque $T$ resulting from the motor is applied to the <strong>mechanical load</strong>.
The load is characterized by a moment of inertia and by a load torque $T<em>mathrm{L}$ that is directed against the motor torque.
Load torque behavior can be parameterized with respect to the angular velocity $omega</em>mathrm{me}$ in the form of constant, linear and quadratic dependency (and arbitrary combinations thereof).
Speed changes that result from the difference between motor and load torque are modeled with another ODE which completely covers the mechanical system behavior.
Alternatively, the motor speed can be set to a fixed value, which can be useful for the investigation of control algorithms concerning generator operation, or it can be set to follow a specified trajectory, which is convenient when inspecting scenarios with defined speed demands like in traction applications.</p>
</div>
<div class="section" id="features">
<h1>Features<a class="headerlink" href="#features" title="Permalink to this headline"></a></h1>
<p>A large number of different motor systems is already implemented.
These include DC drives as well as synchronous and induction three-phase drives.
A complete list can be viewed in the <code class="docutils literal notranslate"><span class="pre">GEM</span></code> documentation [&#64;GEM-docu].
The corresponding power converters allow to control the motor either directly via applied voltage (continuous-control-set) or by defining the converter’s switching state (finite-control-set).
Specifically for the use within reinforcement-learning applications and for testing state-of-the-art expert-driven control designs, the toolbox comes with a built-in reference generator, which can be used to create arbitrary reference trajectories (e.g., for the motor current, velocity or torque).
These generated references are furthermore used to calculate a reward. In the domain of reinforcement learning, reward is the optimization variable that is to be maximized.
For the control system scenario, reward is usually defined by the negative distance between the momentary and desired operation point, such that expedient controller behavior can be monitored easily.
The reward mechanism also allows to take physical limitations of the drive system into account, e.g., in the way of a notably low reward if limit values are surpassed.
Optionally, the environment can be setup such that a reset of the system is induced in case of a limit violation.
In addition, built-in visualization and plotting routines allow to monitor the training process of reinforcement learning agents or the performance of expert-driven control approaches.</p>
</div>
<div class="section" id="examples">
<h1>Examples<a class="headerlink" href="#examples" title="Permalink to this headline"></a></h1>
<p>A minimal example of <code class="docutils literal notranslate"><span class="pre">GEM's</span></code> simulation capability is presented in autoref{fig:SCIM<em>example}.
The plot shows the start-up behavior of a squirrel cage induction motor connected to an idealized three-phase electric grid depicting the angular velocity $omega</em>mathrm{me}$, the torque $T$, the voltage $u<em>{a,b,c}$ and the current $i</em>{d,q}$.
Here, the voltage is depicted within the physical $abc$-frame while the current is viewed within the simplified $dq$-frame.</p>
<a class="reference external image-reference" href="../plots/SCIM_Example.eps"><img alt="Simulation of a squirrel cage induction motor connected to a rigid network at $50 \, \mathrm{Hz}$\label{fig:SCIM_example}" src="../_images/SCIM_Example.eps" /></a>
<p>Exemplary code snippets that demonstrate the usage of <code class="docutils literal notranslate"><span class="pre">GEM</span></code> within both, the classical control and the reinforcement learning context are included within the project’s <a class="reference external" href="https://github.com/upb-lea/gym-electric-motor/tree/master/examples">examples folder</a>.
Featured examples:</p>
<ul class="simple">
<li><p><cite>``GEM_cookbook.ipynb`</cite> &lt;<a class="reference external" href="https://colab.research.google.com/github/upb-lea/gym-electric-motor/blob/master/examples/environment_features/GEM_cookbook.ipynb">https://colab.research.google.com/github/upb-lea/gym-electric-motor/blob/master/examples/environment_features/GEM_cookbook.ipynb</a>&gt;`_: a basic tutorial-style notebook that presents the basic interface and usage of GEM</p></li>
<li><p><cite>``scim_ideal_grid_simulation.py`</cite> &lt;<a class="reference external" href="https://github.com/upb-lea/gym-electric-motor/blob/master/examples/environment_features/scim_ideal_grid_simulation.py">https://github.com/upb-lea/gym-electric-motor/blob/master/examples/environment_features/scim_ideal_grid_simulation.py</a>&gt;`_: a simple motor simulation showcase of the squirrel cage induction motor that was used to create autoref{fig:SCIM_example}</p></li>
</ul>
</div>
<div class="section" id="references">
<h1>References<a class="headerlink" href="#references" title="Permalink to this headline"></a></h1>
</div>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Praneeth Balakrishna, Gerrit Book, Felix Book, Darius Jakobeit, Wilhelm Kirchgässner, Maximilian Schenke, Arne Traue, Oliver Wallscheid.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>